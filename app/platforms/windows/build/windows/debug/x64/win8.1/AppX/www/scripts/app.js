function handleOpenURL(a){"use strict";setTimeout(function(){if(a.toLowerCase().search("flynnapp")>-1){for(var b=a.substring(a.indexOf("//")+2,a.indexOf("?")),c=a.substring(a.indexOf("?")+1).split("&"),d={},e=0,f=c.length;f>e;e++){var g=c[e].split("=");d[g[0]]=g[1]}var h=angular.element(document.body).scope();switch(b){case"config":h.$root.$broadcast("settings.handleURL",d)}}},0)}var ngFlynnApp=ngFlynnApp||{};ngFlynnApp.errorDialogClosed=function(a,b,c){"use strict";c.debug("Error dialog closed.")},ngFlynnApp.showErrorDialog=function(a,b,c,d,e,f,g){"use strict";c.show(),navigator.notification?navigator.notification.alert(f+"\n"+g,ngFlynnApp.errorDialogClosed(a,b,d),"Error - "+e):(window.alert(f+"\n"+g),ngFlynnApp.errorDialogClosed(a,b,d)),c.hide()},ngFlynnApp.isMobileDevice=function(){"use strict";return!!window.cordova},ngFlynnApp.openExternalLink=function(a){"use strict";ngFlynnApp.isMobileDevice()?window.open(a,"_system","location=yes"):window.open(a,"_blank")},ngFlynnApp.configureLogging=function(a,b){"use strict";b&&(a.dbName("flynnDB_logs"),a.outputOnly(!b.dbLogging),a.debugLogging(b.debug),b.debug?(PouchDB.debug.enable("*"),PouchDB.debug.enable("pouchdb:find")):(PouchDB.debug.disable(),PouchDB.debug.disable("pouchdb:find")),a.traceLogging(b.trace))},ngFlynnApp.onDeviceReady=function(){"use strict";var a=angular.injector(["ng"]).get("$http"),b=localStorage["ls.flynn_app.settings"];a.get("config.json").success(function(a,c,d,e){var f;if(b){var g=JSON.parse(b);if(g.appConfig){if(f=g.appConfig,a.overwrite){for(var h in a.config)f[h]=a.config[h];f.update=!0}}else f=a.config}else f=a.config;app.constant("APP_CONFIG",f),app.constant("APP_INFO",a.info),e.dev===!0&&navigator.notification.alert("Running in dev mode!",null,"Info"),angular.bootstrap(document.body,["flynnBookScannerApp"])}).error(function(a,b,c,d){console.error("Did not get valid config.json file."),navigator.notification.alert("Server did not show valid response.",null,"Server Error")})},ngFlynnApp.isMobileDevice()?document.addEventListener("deviceready",ngFlynnApp.onDeviceReady,!1):ngFlynnApp.onDeviceReady();var app=angular.module("flynnBookScannerApp",["ui.bootstrap","LocalStorageModule","ngCookies","ngFileUpload","ngResource","ngSanitize","ngRoute","ngTouch","ionic","dbLog","webWorkerPool"]);if(app.filter("reverse",function(){"use strict";return function(a){return a?a.slice().reverse():void 0}}),app.filter("bookFilter",[function(){"use strict";function a(a,b){for(var c=0,d=a.length;d>c;c++){var e=a[c].toUpperCase();if(e.indexOf(b)>-1)return!0}return!1}return function(b,c){if(c){for(var d,e=!1,f=c.toUpperCase(),g=0,h=b.length;h>g;g++){var i=b[g];i.value.volumeInfo.title.toUpperCase()===f?e=!0:i.value.volumeInfo.title.toUpperCase().indexOf(f)>-1?e=!0:i.value.volumeInfo.subtitle&&i.value.volumeInfo.subtitle.toUpperCase().indexOf(f)>-1?e=!0:i.value.volumeInfo.description&&i.value.volumeInfo.description.toUpperCase().indexOf(f)>-1?e=!0:i.value.volumeInfo.publishedDate&&i.value.volumeInfo.publishedDate.toString().toUpperCase().indexOf(f)>-1?e=!0:i.value.volumeInfo.authors&&a(i.value.volumeInfo.authors,f)&&(e=!0),e&&(d||(d=[]),d.push(i),e=!1)}return d}return b}}]),app.filter("unsafe",["$sce",function(a){"use strict";return function(b){return a.trustAsHtml(b)}}]),app.constant("$ionicLoadingConfig",{template:"<ion-spinner></ion-spinner> <br> Loading "}),app.run(["$ionicPlatform",function(a){"use strict";a.ready(function(){window.cordova&&window.cordova.plugins.Keyboard&&cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!1)})}]),app.config(["$urlRouterProvider","$provide","$compileProvider","$httpProvider","$stateProvider","$ionicConfigProvider","webWorkerPoolProvider","loggerProvider","APP_CONFIG",function(a,b,c,d,e,f,g,h,i){"use strict";c.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|file|ghttps?|ms-appx|x-wmapp0):/),g.workerUrl("scripts/webworker.renderImage.js"),g.capacity(4),f.tabs.position("bottom"),f.tabs.style("standard"),f.views.maxCache(5),f.templates.maxPrefetch(3),ngFlynnApp.configureLogging(h,i),b.decorator("$log",["$delegate",function(a){return h.$get.length>1?h.$get[1](a):h.$get(a)}]),e.state("app",{url:"/app",templateUrl:"views/navbarView.html",controller:"AppController"}).state("app.settings",{url:"/settings",views:{menuContent:{templateUrl:"views/settingsView.html",controller:"SettingsController"}}}).state("app.book_add",{url:"/book/add",views:{menuContent:{templateUrl:"views/addBookView.html",controller:"BookController"}}}).state("app.books",{url:"/books",views:{menuContent:{templateUrl:"views/booksView.html",controller:"BooksController"}}}).state("app.book_show",{url:"/book/show/",params:{book:null},views:{menuContent:{templateUrl:"views/bookView.html",controller:"BookDetailsController"}}}).state("app.book_edit",{url:"/book/edit/",params:{book:null},views:{menuContent:{templateUrl:"views/editBookView.html",controller:"BookEditController"}}}).state("app.book_upload",{url:"/book/upload/",params:{book:null},views:{menuContent:{templateUrl:"views/uploadView.html",controller:"BookUploadController"}}}).state("app.about",{url:"/about",views:{menuContent:{templateUrl:"views/aboutView.html",controller:"AboutController"}}}).state("app.dev",{url:"/dev",views:{menuContent:{templateUrl:"views/devView.html",controller:"DevController"}}}),a.otherwise("/app"),d.defaults.useXDomain=!0,delete d.defaults.headers.common["X-Requested-With"]}]),"undefined"!=typeof require){var gui=require("nw.gui"),ngFlynnApp=ngFlynnApp||{},global=global||{};ngFlynnApp.nw={},ngFlynnApp.nw.init=function(){"use strict";if("darwin"===process.platform){var a=new gui.Menu({type:"menubar"});a.createMacBuiltin("My App"),gui.Window.get().menu=a}},gui&&(global.window=window,global.gui=gui,console.log("Running in nw.js"),ngFlynnApp.nw.init())}